<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 3px; }
        .pass-result { background-color: #d4edda; }
        .fail-result { background-color: #f8d7da; }
        .warning-result { background-color: #fff3cd; }
        .test-form { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .form-group { margin: 10px 0; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 3px; }
        .test-button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 3px; cursor: pointer; margin: 5px; }
        .test-button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</h1>
    
    <div class="test-section">
        <h2>1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º</h2>
        <div class="test-form">
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É:</label>
                <input type="text" id="test-product-name" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É">
            </div>
            <div class="form-group">
                <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å:</label>
                <input type="number" id="test-quantity" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å">
            </div>
            <div class="form-group">
                <label>–¶—ñ–Ω–∞:</label>
                <input type="number" id="test-price" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ü—ñ–Ω—É">
            </div>
            <button class="test-button" onclick="testFormValidation()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é</button>
        </div>
        <div id="validation-result" class="test-result">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó...</div>
    </div>
    
    <div class="test-section">
        <h2>2. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ</h2>
        <button class="test-button" onclick="testLocalStorage()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è</button>
        <button class="test-button" onclick="testStorageRetrieval()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è</button>
        <button class="test-button" onclick="testStorageClear()">–û—á–∏—Å—Ç–∏—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è</button>
        <div id="storage-result" class="test-result">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è...</div>
    </div>
    
    <div class="test-section">
        <h2>3. API –≤—ã–∑–æ–≤—ã</h2>
        <button class="test-button" onclick="testAPICall()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ API</button>
        <div id="api-result" class="test-result">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É API...</div>
    </div>
    
    <div class="test-section">
        <h2>4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤</h2>
        <input type="file" id="test-file" accept="image/*" onchange="testFileHandling()">
        <div id="file-result" class="test-result">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É —Ñ–∞–π–ª—ñ–≤...</div>
    </div>
    
    <div class="test-section">
        <h2>5. –¢–µ–º—ã –∏ UI</h2>
        <button class="test-button" onclick="testThemeToggle()">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ —Ç–µ–º—É</button>
        <div id="theme-result" class="test-result">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É —Ç–µ–º...</div>
    </div>
    
    <div class="test-section">
        <h2>6. –ù–∞–≤–∏–≥–∞—Ü–∏—è</h2>
        <button class="test-button" onclick="testNavigation()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—é</button>
        <div id="navigation-result" class="test-result">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó...</div>
    </div>

    <script>
        // –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º
        function testFormValidation() {
            const result = document.getElementById('validation-result');
            const productName = document.getElementById('test-product-name').value;
            const quantity = document.getElementById('test-quantity').value;
            const price = document.getElementById('test-price').value;
            
            const tests = [
                {
                    name: '–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É',
                    value: productName,
                    validator: (val) => val && val.length >= 2 && val.length <= 100
                },
                {
                    name: '–ö—ñ–ª—å–∫—ñ—Å—Ç—å',
                    value: quantity,
                    validator: (val) => !isNaN(val) && parseFloat(val) > 0 && parseFloat(val) <= 10000
                },
                {
                    name: '–¶—ñ–Ω–∞',
                    value: price,
                    validator: (val) => !isNaN(val) && parseFloat(val) >= 0 && parseFloat(val) <= 100000
                }
            ];
            
            let passed = 0;
            let total = tests.length;
            let details = '';
            
            tests.forEach(test => {
                const isValid = test.validator(test.value);
                if (isValid) passed++;
                details += `${test.name}: ${isValid ? '‚úÖ' : '‚ùå'}<br>`;
            });
            
            if (passed === total) {
                result.className = 'test-result pass-result';
                result.innerHTML = `‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î (${passed}/${total})<br>${details}`;
            } else {
                result.className = 'test-result fail-result';
                result.innerHTML = `‚ùå –ü—Ä–æ–±–ª–µ–º–∏ –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é (${passed}/${total})<br>${details}`;
            }
        }
        
        // –¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
        function testLocalStorage() {
            const result = document.getElementById('storage-result');
            
            try {
                const testData = {
                    id: 'test-' + Date.now(),
                    productName: '–¢–µ—Å—Ç–æ–≤–∏–π —Ç–æ–≤–∞—Ä',
                    quantity: 10,
                    unit: '–∫–≥',
                    pricePerUnit: 25.50,
                    totalAmount: 255.00,
                    location: '–¢–µ—Å—Ç–æ–≤–∞ –ª–æ–∫–∞—Ü—ñ—è',
                    timestamp: new Date().toISOString(),
                    type: '–ó–∞–∫—É–ø–∫–∞'
                };
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
                function validateHistoryItem(item) {
                    return item && 
                           typeof item.id === 'string' &&
                           typeof item.productName === 'string' &&
                           typeof item.quantity === 'number' &&
                           typeof item.unit === 'string' &&
                           typeof item.location === 'string' &&
                           typeof item.timestamp === 'string';
                }
                
                if (validateHistoryItem(testData)) {
                    sessionStorage.setItem('test_purchase_history', JSON.stringify([testData]));
                    result.className = 'test-result pass-result';
                    result.innerHTML = '‚úÖ –î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ sessionStorage';
                } else {
                    result.className = 'test-result fail-result';
                    result.innerHTML = '‚ùå –î–∞–Ω—ñ –Ω–µ –ø—Ä–æ–π—à–ª–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é';
                }
            } catch (e) {
                result.className = 'test-result fail-result';
                result.innerHTML = '‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è: ' + e.message;
            }
        }
        
        function testStorageRetrieval() {
            const result = document.getElementById('storage-result');
            
            try {
                const data = sessionStorage.getItem('test_purchase_history');
                if (data) {
                    const items = JSON.parse(data);
                    if (Array.isArray(items) && items.length > 0) {
                        result.className = 'test-result pass-result';
                        result.innerHTML = `‚úÖ –î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –æ—Ç—Ä–∏–º–∞–Ω–æ: ${items.length} –∑–∞–ø–∏—Å—ñ–≤`;
                    } else {
                        result.className = 'test-result fail-result';
                        result.innerHTML = '‚ùå –ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è';
                    }
                } else {
                    result.className = 'test-result warning-result';
                    result.innerHTML = '‚ö†Ô∏è –ù–µ–º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö';
                }
            } catch (e) {
                result.className = 'test-result fail-result';
                result.innerHTML = '‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è: ' + e.message;
            }
        }
        
        function testStorageClear() {
            const result = document.getElementById('storage-result');
            
            try {
                sessionStorage.removeItem('test_purchase_history');
                result.className = 'test-result pass-result';
                result.innerHTML = '‚úÖ –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –æ—á–∏—â–µ–Ω–æ';
            } catch (e) {
                result.className = 'test-result fail-result';
                result.innerHTML = '‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—á–∏—â–µ–Ω–Ω—è: ' + e.message;
            }
        }
        
        // –¢–µ—Å—Ç API –≤—ã–∑–æ–≤–æ–≤
        function testAPICall() {
            const result = document.getElementById('api-result');
            
            // –°–∏–º—É–ª—è—Ü–∏—è API –≤—ã–∑–æ–≤–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 5000);
            
            result.innerHTML = '‚è≥ –¢–µ—Å—Ç—É—î–º–æ API –≤–∏–∫–ª–∏–∫...';
            
            // –¢–µ—Å—Ç–æ–≤—ã–π URL (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
            const testUrl = 'https://httpbin.org/delay/1';
            
            fetch(testUrl, {
                method: 'GET',
                signal: controller.signal,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => {
                clearTimeout(timeoutId);
                if (response.ok) {
                    result.className = 'test-result pass-result';
                    result.innerHTML = '‚úÖ API –≤–∏–∫–ª–∏–∫ —É—Å–ø—ñ—à–Ω–∏–π - —î —Ç–∞–π–º–∞—É—Ç —ñ CSRF –∑–∞—Ö–∏—Å—Ç';
                } else {
                    result.className = 'test-result fail-result';
                    result.innerHTML = '‚ùå API –≤–∏–∫–ª–∏–∫ –Ω–µ–≤–¥–∞–ª–∏–π: ' + response.status;
                }
            })
            .catch(error => {
                clearTimeout(timeoutId);
                if (error.name === 'AbortError') {
                    result.className = 'test-result pass-result';
                    result.innerHTML = '‚úÖ –¢–∞–π–º–∞—É—Ç –ø—Ä–∞—Ü—é—î - –∑–∞–ø–∏—Ç —Å–∫–∞—Å–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥';
                } else {
                    result.className = 'test-result warning-result';
                    result.innerHTML = '‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞ API: ' + error.message;
                }
            });
        }
        
        // –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
        function testFileHandling() {
            const result = document.getElementById('file-result');
            const fileInput = document.getElementById('test-file');
            const file = fileInput.files[0];
            
            if (!file) {
                result.className = 'test-result warning-result';
                result.innerHTML = '‚ö†Ô∏è –§–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ';
                return;
            }
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞
            const maxSize = 5 * 1024 * 1024; // 5MB
            const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
            
            const sizeValid = file.size <= maxSize;
            const typeValid = allowedTypes.includes(file.type);
            
            if (sizeValid && typeValid) {
                result.className = 'test-result pass-result';
                result.innerHTML = `‚úÖ –§–∞–π–ª –≤–∞–ª—ñ–¥–Ω–∏–π: ${(file.size / 1024).toFixed(2)} KB, ${file.type}`;
            } else {
                result.className = 'test-result fail-result';
                let errors = [];
                if (!sizeValid) errors.push('—Ä–æ–∑–º—ñ—Ä –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∏–π');
                if (!typeValid) errors.push('–Ω–µ–ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏–π —Ç–∏–ø');
                result.innerHTML = `‚ùå –§–∞–π–ª –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π: ${errors.join(', ')}`;
            }
        }
        
        // –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º
        function testThemeToggle() {
            const result = document.getElementById('theme-result');
            
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            result.className = 'test-result pass-result';
            result.innerHTML = `‚úÖ –¢–µ–º–∞ –∑–º—ñ–Ω–µ–Ω–∞ –∑ ${currentTheme} –Ω–∞ ${newTheme}`;
        }
        
        // –¢–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        function testNavigation() {
            const result = document.getElementById('navigation-result');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            const hasBackButton = document.querySelector('.back-button') !== null;
            const hasNavButtons = document.querySelectorAll('.nav-button').length > 0;
            const hasBottomNav = document.querySelector('.bottom-navigation') !== null;
            
            const tests = [
                { name: '–ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥', passed: hasBackButton },
                { name: '–ö–Ω–æ–ø–∫–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó', passed: hasNavButtons },
                { name: '–ù–∏–∂–Ω—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è', passed: hasBottomNav }
            ];
            
            const passed = tests.filter(t => t.passed).length;
            const total = tests.length;
            
            let details = tests.map(t => `${t.name}: ${t.passed ? '‚úÖ' : '‚ùå'}`).join('<br>');
            
            if (passed === total) {
                result.className = 'test-result pass-result';
                result.innerHTML = `‚úÖ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î (${passed}/${total})<br>${details}`;
            } else {
                result.className = 'test-result fail-result';
                result.innerHTML = `‚ùå –ü—Ä–æ–±–ª–µ–º–∏ –∑ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—î—é (${passed}/${total})<br>${details}`;
            }
        }
    </script>
</body>
</html>
