# –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ fontkit –∏ IndexedDB

## –î–∞—Ç–∞: 22 –æ–∫—Ç—è–±—Ä—è 2025

---

## –ü—Ä–æ–±–ª–µ–º–∞ #1: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ fontkit

### –°–∏–º–ø—Ç–æ–º:
```
‚ùå PDF generation error: TypeError: e.create is not a function
    at t.<anonymous> (CustomFontEmbedder.js:37:58)
```

### –ü—Ä–∏—á–∏–Ω–∞:
**fontkit –∑–∞–≥—Ä—É–∂–∞–ª—Å—è —á–µ—Ä–µ–∑ `import()` –∫–∞–∫ ES –º–æ–¥—É–ª—å, –Ω–æ UMD –≤–µ—Ä—Å–∏—è fontkit —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç —á–µ—Ä–µ–∑ `window.fontkit`**, –∞ –Ω–µ —á–µ—Ä–µ–∑ module exports.

–ö–æ–≥–¥–∞ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏:
```javascript
const fontkit = await import(FONTKIT_CDN_URL);
return fontkit.default || fontkit;
```

–ü–æ–ª—É—á–∞–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å–æ–¥–µ—Ä–∂–∞–ª –Ω—É–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `create()`).

### –†–µ—à–µ–Ω–∏–µ:
**–ó–∞–≥—Ä—É–∂–∞—Ç—å fontkit —á–µ—Ä–µ–∑ `<script>` —Ç–µ–≥ –∏ –ø–æ–ª—É—á–∞—Ç—å –∏–∑ `window.fontkit`.**

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/pdf.js`

### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `loadFontkit()` (—Å—Ç—Ä–æ–∫–∏ 31-66):

```javascript
async function loadFontkit() {
    if (!fontkitModulePromise) {
        fontkitModulePromise = new Promise((resolve, reject) => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –ª–∏ fontkit —É–∂–µ —á–µ—Ä–µ–∑ window.fontkit
            if (window.fontkit) {
                resolve(window.fontkit);
                return;
            }

            // –°–æ–∑–¥–∞–µ–º script —Ç–µ–≥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ fontkit
            const script = document.createElement('script');
            script.src = FONTKIT_CDN_URL;
            script.async = true;

            script.onload = () => {
                // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ UMD –º–æ–¥—É–ª—è fontkit –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ window.fontkit
                if (window.fontkit) {
                    console.log('‚úÖ fontkit loaded successfully');
                    resolve(window.fontkit);
                } else {
                    reject(new Error('fontkit loaded but not found in window'));
                }
            };

            script.onerror = (error) => {
                fontkitModulePromise = null;
                console.error('Failed to load fontkit from CDN.', error);
                reject(new Error('Failed to load fontkit from CDN.'));
            };

            document.head.appendChild(script);
        });
    }

    return fontkitModulePromise;
}
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞**: –ï—Å–ª–∏ fontkit —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ `window.fontkit`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ —Å—Ä–∞–∑—É
2. **–°–æ–∑–¥–∞–Ω–∏–µ `<script>`**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ–º script —ç–ª–µ–º–µ–Ω—Ç
3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ src**: –£–∫–∞–∑—ã–≤–∞–µ–º CDN URL fontkit
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏**: –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º `window.fontkit`
5. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ DOM**: –í—Å—Ç–∞–≤–ª—è–µ–º script –≤ `<head>` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
6. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Promise**: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã –≤–µ—Ä–Ω—É—Ç —Ç–æ—Ç –∂–µ Promise

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç —Å UMD –º–æ–¥—É–ª—è–º–∏** - fontkit –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `window`
‚úÖ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - fontkit –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è** - –µ—Å–ª–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏

---

## –ü—Ä–æ–±–ª–µ–º–∞ #2: IndexedDB –æ—à–∏–±–∫–∞ 'logs' object store

### –°–∏–º–ø—Ç–æ–º:
```
Failed to log to IndexedDB, using localStorage: NotFoundError:
Failed to execute 'transaction' on 'IDBDatabase':
One of the specified object stores was not found.
```

### –ü—Ä–∏—á–∏–Ω–∞:
**Object store 'logs' —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ `onupgradeneeded`, –Ω–æ –µ—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞ —Å –≤–µ—Ä—Å–∏–µ–π 1, —Ç–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –±–∞–∑—ã `onupgradeneeded` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**, –∏ store 'logs' –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è.

### –†–µ—à–µ–Ω–∏–µ:
**–£–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Ä—Å–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å 1 –¥–æ 2**, —á—Ç–æ–±—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞—Ç—å `onupgradeneeded` –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–∞–∑.

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/state.js`

### –£–≤–µ–ª–∏—á–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –ë–î (—Å—Ç—Ä–æ–∫–∞ 376):

**–î–û:**
```javascript
static DB_VERSION = 1;
```

**–ü–û–°–õ–ï:**
```javascript
static DB_VERSION = 2; // –£–≤–µ–ª–∏—á–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è 'logs' store
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏–∏:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **IndexedDB.open('GalaBaluvanaDB', 2)** –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
3. **–ë—Ä–∞—É–∑–µ—Ä –≤–∏–¥–∏—Ç**: —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è = 1, –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è = 2
4. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è `onupgradeneeded`** —Å `event.oldVersion = 1`, `event.newVersion = 2`
5. **–°–æ–∑–¥–∞—é—Ç—Å—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ stores**:
   ```javascript
   if (!db.objectStoreNames.contains('logs')) {
       db.createObjectStore('logs', { keyPath: 'id', autoIncrement: true });
       console.log('‚úÖ Created object store: logs');
   }
   ```
6. **–ë–∞–∑–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–æ –≤–µ—Ä—Å–∏–∏ 2**
7. **–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ 'logs' —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç**

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–∑—Ä–∞—á–Ω–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–º–µ—á–∞–µ—Ç
‚úÖ **Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç** - –µ—Å–ª–∏ –æ—à–∏–±–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è localStorage
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ª–æ–≥–æ–≤

---

## –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ fontkit

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ loadFontkit() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è                                ‚îÇ
‚îÇ ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç window.fontkit                              ‚îÇ
‚îÇ ‚Ä¢ –°–æ–∑–¥–∞–µ—Ç <script src="fontkit CDN">                    ‚îÇ
‚îÇ ‚Ä¢ –î–æ–±–∞–≤–ª—è–µ—Ç –≤ <head>                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CDN –∑–∞–≥—Ä—É–∂–∞–µ—Ç fontkit (~200 KB)                         ‚îÇ
‚îÇ ‚Ä¢ UMD –º–æ–¥—É–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç window.fontkit               ‚îÇ
‚îÇ ‚Ä¢ script.onload() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è                            ‚îÇ
‚îÇ ‚Ä¢ Promise resolves —Å window.fontkit                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ pdfDoc.registerFontkit(fontkit)                         ‚îÇ
‚îÇ ‚Ä¢ fontkit –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ PDF –¥–æ–∫—É–º–µ–Ω—Ç–µ               ‚îÇ
‚îÇ ‚Ä¢ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ loadFontBytes() –∑–∞–≥—Ä—É–∂–∞–µ—Ç NotoSans-Regular.ttf          ‚îÇ
‚îÇ ‚Ä¢ fetch('fonts/NotoSans-Regular.ttf')                   ‚îÇ
‚îÇ ‚Ä¢ –ö–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ cachedFontBytes                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ pdfDoc.embedFont(fontBytes)                             ‚îÇ
‚îÇ ‚Ä¢ –®—Ä–∏—Ñ—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ PDF                              ‚îÇ
‚îÇ ‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—É (Unicode)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å —É–∫—Ä–∞–∏–Ω—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º ‚úÖ                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ loadFontkit()                                           ‚îÇ
‚îÇ ‚Ä¢ window.fontkit —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç                         ‚îÇ
‚îÇ ‚Ä¢ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ä–∞–∑—É (–±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏)                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ loadFontBytes()                                         ‚îÇ
‚îÇ ‚Ä¢ cachedFontBytes —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç                        ‚îÇ
‚îÇ ‚Ä¢ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ä–∞–∑—É (–±–µ–∑ fetch)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (~100-200 –º—Å) ‚úÖ                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ IndexedDB

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–µ—Ä–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ë–î v1)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ indexedDB.open('GalaBaluvanaDB', 2)                     ‚îÇ
‚îÇ ‚Ä¢ –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: 1                                     ‚îÇ
‚îÇ ‚Ä¢ –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è: 2                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ onupgradeneeded –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è                              ‚îÇ
‚îÇ ‚Ä¢ event.oldVersion = 1                                  ‚îÇ
‚îÇ ‚Ä¢ event.newVersion = 2                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö stores:                           ‚îÇ
‚îÇ ‚Ä¢ 'history' - EXISTS (–≤–µ—Ä—Å–∏—è 1)                         ‚îÇ
‚îÇ ‚Ä¢ 'drafts' - EXISTS (–≤–µ—Ä—Å–∏—è 1)                          ‚îÇ
‚îÇ ‚Ä¢ 'purchaseDrafts' - EXISTS (–≤–µ—Ä—Å–∏—è 1)                  ‚îÇ
‚îÇ ‚Ä¢ 'inventory' - EXISTS (–≤–µ—Ä—Å–∏—è 1)                       ‚îÇ
‚îÇ ‚Ä¢ 'logs' - NOT EXISTS (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å!)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ if (!db.objectStoreNames.contains('logs'))              ‚îÇ
‚îÇ     db.createObjectStore('logs', {...})                 ‚îÇ
‚îÇ     console.log('‚úÖ Created object store: logs')        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –≤–µ—Ä—Å–∏–∏ 2 ‚úÖ                    ‚îÇ
‚îÇ ‚Ä¢ –í—Å–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã                           ‚îÇ
‚îÇ ‚Ä¢ –ù–æ–≤—ã–π store 'logs' –¥–æ–±–∞–≤–ª–µ–Ω                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ ‚úÖ               ‚îÇ
‚îÇ ‚Ä¢ logAction() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 'logs' store                   ‚îÇ
‚îÇ ‚Ä¢ Fallback –Ω–∞ localStorage –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:

```bash
node --check src/pdf.js
node --check src/state.js
# ‚úÖ –û–±–∞ —Ñ–∞–π–ª–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ fontkit:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
3. –°–æ–∑–¥–∞–π—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫ —Å —É–∫—Ä–∞–∏–Ω—Å–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
4. –ù–∞–∂–º–∏—Ç–µ "–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—Å—ñ"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:
   ```
   ‚úÖ fontkit loaded successfully
   ‚úÖ PDF —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: –í—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è_...pdf
   ```
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–≤—å—é –∏ —Å–∫–∞—á–∞–Ω–Ω—ã–π PDF:
   - ‚úÖ –£–∫—Ä–∞–∏–Ω—Å–∫–∏–π —Ç–µ–∫—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –ù–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–æ–≤ –∏–ª–∏ –∑–Ω–∞–∫–æ–≤ –≤–æ–ø—Ä–æ—Å–∞

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ IndexedDB:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Application ‚Üí IndexedDB ‚Üí GalaBaluvanaDB
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Object Stores:
   - ‚úÖ history
   - ‚úÖ drafts
   - ‚úÖ purchaseDrafts
   - ‚úÖ inventory
   - ‚úÖ logs (–¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (—Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:
   - ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "Failed to log to IndexedDB"
   - ‚úÖ –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ IndexedDB, –∞ –Ω–µ –≤ localStorage

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (summary)

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –°—Ç—Ä–æ–∫–∏ | –°—Ç–∞—Ç—É—Å |
|------|-----------|--------|--------|
| **src/pdf.js** | –ü–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadFontkit()` | 31-66 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **src/state.js** | –£–≤–µ–ª–∏—á–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –ë–î: 1 ‚Üí 2 | 376 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF (—Å –∑–∞–≥—Ä—É–∑–∫–æ–π fontkit –∏ —à—Ä–∏—Ñ—Ç–∞):
- **–ó–∞–≥—Ä—É–∑–∫–∞ fontkit**: ~150-200 –º—Å
- **–ó–∞–≥—Ä—É–∑–∫–∞ NotoSans-Regular.ttf**: ~300-400 –º—Å
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF**: ~200-300 –º—Å
- **–ò–¢–û–ì–û**: ~650-900 –º—Å

### –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF (–≤—Å–µ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–æ):
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF**: ~100-200 –º—Å
- **–ò–¢–û–ì–û**: ~100-200 –º—Å ‚ö°

### –ú–∏–≥—Ä–∞—Ü–∏—è IndexedDB v1 ‚Üí v2:
- **–ü–µ—Ä–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ**: ~50-100 –º—Å (–≤—ã–∑–æ–≤ onupgradeneeded)
- **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è**: ~20-30 –º—Å (–æ–±—ã—á–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ)

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: fontkit –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ "Failed to load fontkit from CDN"

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∞—Ç—å jsdelivr.net)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ 404 –∏–ª–∏ CORS –æ—à–∏–±–∫–∏
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π CDN:
   ```javascript
   const FONTKIT_CDN_URL = 'https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js';
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: window.fontkit undefined –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ "fontkit loaded but not found in window"

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é fontkit (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1.1.1)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è UMD –≤–µ—Ä—Å–∏—è (`.umd.min.js`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSP: `script-src 'self' cdn.jsdelivr.net`

### –ü—Ä–æ–±–ª–µ–º–∞: IndexedDB –≤—Å–µ –µ—â–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É 'logs'

**–°–∏–º–ø—Ç–æ–º:** "One of the specified object stores was not found"

**–†–µ—à–µ–Ω–∏—è:**
1. **–£–¥–∞–ª–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ:
   - Application ‚Üí IndexedDB ‚Üí GalaBaluvanaDB ‚Üí Delete database
   - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl + Shift + R)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –≤ –∫–æ–¥–µ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 2)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –ë–î

### –ü—Ä–æ–±–ª–µ–º–∞: PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, –Ω–æ —Ç–µ–∫—Å—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:** –í–º–µ—Å—Ç–æ —É–∫—Ä–∞–∏–Ω—Å–∫–∏—Ö –±—É–∫–≤ –ø—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ –∏–ª–∏ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∏

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ fontkit –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:
   ```javascript
   console.log('fontkit:', fontkit); // –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä–µ–∫—Ç
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ fontBytes –∑–∞–≥—Ä—É–∂–µ–Ω:
   ```javascript
   console.log('fontBytes:', fontBytes?.byteLength); // > 100000
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª —à—Ä–∏—Ñ—Ç–∞: `fonts/NotoSans-Regular.ttf` –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **fontkit –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–µ—Ä–µ–∑ `<script>` –∏ `window.fontkit`**
‚úÖ **IndexedDB –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –≤–µ—Ä—Å–∏–∏ 2 —Å object store 'logs'**
‚úÖ **PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É–∫—Ä–∞–∏–Ω—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º**
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫**
‚úÖ **Fallback –Ω–∞ localStorage –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö IndexedDB**

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≥—Ä—É–∑–∫–∏ —Å PDF! üöÄ

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~30 –º–∏–Ω—É—Ç
**–ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 2
**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫:** 36
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**
